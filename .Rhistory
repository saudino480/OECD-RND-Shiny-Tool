A1 <- gvisAnnotationChart(test1, datevar="YEAR",
numvar="Value", idvar="Country",
titlevar="Title", annotationvar="MSTI.Variable",
options=list(displayAnnotations=TRUE,
legendPosition='newRow',
width=600, height=350)
)
A1 <- gvisAnnotationChart(test1, datevar="YEAR",
numvar="Value", idvar="Country",
titlevar="Title", #annotationvar="MSTI.Variable",
options=list(displayAnnotations=TRUE,
legendPosition='newRow',
width=600, height=350)
)
A1 <- gvisAnnotationChart(test1, datevar="YEAR",
numvar="Value", idvar="Country",
#titlevar="Title", #annotationvar="MSTI.Variable",
options=list(displayAnnotations=TRUE,
legendPosition='newRow',
width=600, height=350)
)
test1 = data %>%
filter(src == "G_" & MSTI.Variables == "Gross Domestic Expenditure on R&D (GERD) at current PPP $")
test1$YEAR = unlist(lapply(test1$YEAR, as_date, origin = lubridate::origin))
View(test1)
test1$YEAR = lapply(test1$YEAR, as_date, origin = lubridate::origin)
A1 <- gvisAnnotationChart(test1, datevar="YEAR",
numvar="Value", idvar="Country",
#titlevar="Title", #annotationvar="MSTI.Variable",
options=list(displayAnnotations=TRUE,
legendPosition='newRow',
width=600, height=350)
)
test1$YEAR = sapply(test1$YEAR, as_date, origin = lubridate::origin)
A1 <- gvisAnnotationChart(test1, datevar="YEAR",
numvar="Value", idvar="Country",
#titlevar="Title", #annotationvar="MSTI.Variable",
options=list(displayAnnotations=TRUE,
legendPosition='newRow',
width=600, height=350)
)
runApp('shinyProject')
runApp('shinyProject')
runApp('shinyProject')
runApp('shinyProject')
runApp('shinyProject')
?spread
df <- data.frame(x = c("a", "b"), y = c(3, 4), z = c(5, 6))
View(df)
df %>% spread(x, y)
view(df %>% spread(x, y))
test2 = spread(data, key = unique(Country), value = Value)
View(test2)
Line2 <- gvisLineChart(test2, "YEAR", "Value",
options=list(title=input$rnd_type)
)
Line2 <- gvisLineChart(test2, "YEAR", "Value",
options=list(title="This is a test")
)
Line2 <- gvisLineChart(test2, "YEAR", c(colnames(test2)[,17:29]),
options=list(title="This is a test")
)
names = colnames(test2)[17:29,]
names = colnames(test2)[17:29]
Line2 <- gvisLineChart(test2, "YEAR", names,
options=list(title="This is a test")
)
plot(Line2)
test2 = test2 %>%
filter(src == "G_" & MSTI.Variables == "Gross Domestic Expenditure on R&D (GERD) at current PPP $")
Line2 <- gvisLineChart(test2, "YEAR", names,
options=list(title="This is a test")
)
plot(Line2)
Line2 <- gvisLineChart(test2, xvar = "YEAR", yvar = names,
options=list(title="This is a test")
)
plot(Line2)
View(test2)
?gvisLineChart
Line2 <- gvisLineChart(test2, xvar = "YEAR", yvar = "Australia",
options=list(title="This is a test")
)
plot(Line2)
View(test2)
?rbind
test2 = test2 %>%
filter(YEAR == "2011")
View(test2)
rbind(test2)
test2 = test2 %>%
filter(YEAR == "2011") %>%
summarise()
View(test2)
test2 = spread(data, key = unique(Country), value = Value)
test2 = test2 %>%
filter(src == "G_" & MSTI.Variables == "Gross Domestic Expenditure on R&D (GERD) at current PPP $")
test2 = test2 %>%
filter(YEAR == "2011") %>%
summarise()
test2 = test2 %>%
filter(YEAR == "2011") %>%
summarise(names)
test2 = spread(data, key = unique(Country), value = Value)
test2 = test2 %>%
filter(src == "G_" & MSTI.Variables == "Gross Domestic Expenditure on R&D (GERD) at current PPP $")
test2 = test2 %>%
filter(YEAR == "2011") %>%
summarise(names)
test2 = spread(data, key = unique(Country), value = Value, fill = 0)
test2 = test2 %>%
filter(src == "G_" & MSTI.Variables == "Gross Domestic Expenditure on R&D (GERD) at current PPP $")
test2 = test2 %>%
filter(YEAR == "2011") %>%
summarise(names)
View(test2)
test2 = test2 %>%
filter(YEAR == "2011")
rbind(test2)
test3 = test3 %>%
summarise(YEAR, names = sum(names))
test3 = test2 %>%
summarise(YEAR, names = sum(names))
test3 = test2 %>%
summarise(names = sum(names))
test3 = colSums(test2[names, ])
test3 = colSums(test2[,names ])
?summarise_if
test2 = test2 %>%
filter(YEAR == "2011") %>%
summarise_at(names, sum)
View(test2)
test2 = test2 %>%
filter(YEAR == "2011") %>%
group_by(YEAR, MSTI.Variable) %>%
summarise_at(names, sum)
test2 = spread(data, key = unique(Country), value = Value, fill = 0)
test2 = test2 %>%
filter(src == "G_" & MSTI.Variables == "Gross Domestic Expenditure on R&D (GERD) at current PPP $")
test3 = test2 %>%
filter(YEAR == "2011") %>%
group_by(YEAR, MSTI.Variable) %>%
summarise_at(names, sum)
View(test1)
test3 = test2 %>%
filter(YEAR == "2011") %>%
group_by(YEAR, MSTI.Variables) %>%
summarise_at(names, sum)
View(test3)
test3 = test2 %>%
group_by(YEAR, MSTI.Variables) %>%
summarise_at(names, sum)
View(test3)
Line2 <- gvisLineChart(test3, xvar = "YEAR", yvar = "Australia",
options=list(title="This is a test")
)
plot(Line2)
Line2 <- gvisLineChart(test3, xvar = "YEAR", yvar = names,
options=list(title="This is a test")
)
source('~/Documents/Bootcamp/Project/ShinyProject/testing.R', echo=TRUE)
Line2 <- gvisLineChart(test3, xvar = "YEAR", yvar = c("Australia", "Canada"),
options=list(title="This is a test")
)
plot(Line2)
test2 = spread(data, key = unique(Country), value = Value, fill = NA)
test3 = test2 %>%
group_by(YEAR, MSTI.Variables) %>%
summarise_at(names, sum)
View(test3)
test3 = test2 %>%
group_by(YEAR, MSTI.Variables) %>%
summarise_at(names, sum, na.rm=TRUE)
View(test3)
Line2 <- gvisLineChart(test3, xvar = "YEAR", yvar = c("Australia", "Canada", "United States"),
options=list(title="This is a test")
)
plot(Line2)
test3 = test2 %>%
group_by(YEAR, MSTI.Variables, Unit, Powercode) %>%
summarise_at(names, sum, na.rm=TRUE)
test3 = test2 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode) %>%
summarise_at(names, sum, na.rm=TRUE)
View(test3)
data = read.csv("./data/Science_Math_First_Clean.csv")
setwd("~/Documents/Bootcamp/Project/ShinyProject/shinyProject")
data1 = spread(data, key = unique(Country), value = Value, fill = NA)
names = colnames(data)[17:29]
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode) %>%
summarise_at(names, sum, na.rm=TRUE)
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode) %>%
summarise_at(names, sum, na.rm=TRUE)
data1 = spread(data, key = unique(Country), value = Value, fill = NA)
View(data1)
names = colnames(data1)[17:29]
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode) %>%
summarise_at(names, sum, na.rm=TRUE)
View(data1)
write.csv(data, file = "./Science_Math_Fourth_Clean.csv")
write.csv(data, file = "./data/Science_Math_Fourth_Clean.csv")
View(test3)
runApp()
runApp()
runApp()
runApp()
View(data)
data1 = spread(data, key = unique(Country), value = Value, fill = NA)
View(data)
View(data1)
names = colnames(data1)[18:30]
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode) %>%
summarise_at(names, sum, na.rm=TRUE)
write.csv(data1, file = "./data/Science_Math_Fourth_Clean.csv")
runApp()
runApp()
runApp()
runApp()
View(data)
names[-3]
names[11]
runApp()
runApp()
runApp()
View(data)
runApp()
View(data)
runApp()
data = read.csv(file = "../Science_Math_Spending.csv")
data1 = spread(data, key = unique(Country), value = Value, fill = NA)
data = read.csv(file = "../Science_Math_Spending.csv")
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
data1 = spread(data, key = unique(Country), value = Value, fill = NA)
names = colnames(data1)[17:60]
names = colnames(data1)[16:60]
View(data1)
names = colnames(data1)[15:60]
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode) %>%
summarise_at(names, sum, na.rm=TRUE)
View(data1)
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, sum, na.rm=TRUE)
data = read.csv(file = "../Science_Math_Spending.csv")
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
data1 = spread(data, key = unique(Country), value = Value, fill = NA)
names = colnames(data1)[15:60]
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, sum, na.rm=TRUE)
write.csv(data1, file = "./data/Science_Math_Fifth_Clean.csv")
View(data1)
View(data1)
runApp()
runApp()
runApp()
runApp()
data = read.csv(file = "../Science_Math_Spending.csv")
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
data1 = spread(data, key = unique(Country), value = Value, fill = 0)
names = colnames(data1)[15:60]
names = colnames(data1)[14:60]
names = colnames(data1)[15:60]
names[40:46]
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, sum, na.rm=TRUE)
write.csv(data1, file = "./data/Science_Math_Fifth_Clean.csv")
data = read.csv("./data/Science_Math_Fifth_Clean.csv")
View(data)
data = data[-1,]
View(data)
data = data[,-1]
View(data1)
View(data)
data = read.csv(file = "../Science_Math_Spending.csv")
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
data1 = spread(data, key = unique(Country), value = Value, fill = 0)
names = colnames(data1)[15:60]
names[40:46]
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, sum, na.rm=TRUE)
View(data1)
write.csv(data1, file = "./data/Science_Math_Fifth_Clean.csv")
data = read.csv("./data/Science_Math_Fifth_Clean.csv")
data = data[,-1]
names = colnames(data)[7:51]
source("./helper.R")
runApp()
View(data)
names
runApp()
runApp()
runApp()
View(data)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
data = read.csv(file = "../Science_Math_Spending.csv")
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
data1 = spread(data, key = unique(Country), value = Value, fill = NA)
names = colnames(data1)[15:60]
names[40:46]
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, sum, na.rm=TRUE)
View(data1)
data1 = spread(data, key = unique(Country), value = Value, fill = NA)
names = colnames(data1)[15:60]
names[40:46]
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, sum, na.rm=TRUE)
View(data1)
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, sum)
View(data1)
data = read.csv(file = "../Science_Math_Spending.csv")
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
data1 = spread(data, key = unique(Country), value = Value)
names = colnames(data1)[15:60]
names[40:46]
data1 = data1 %>%
group_by(YEAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, sum)
View(data1)
runApp()
runApp()
runApp()
runApp()
runApp()
View(data)
View(unique(data$MSTI.Variables))
data = read.csv(file = "../Science_Math_Spending.csv")
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
data1 = spread(data, key = unique(Country), value = Value)
names = colnames(data1)[15:60]
names[40:46]
data1 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, sum)
write.csv(data1, file = "./data/Science_Math_Sixth_Clean.csv")
View(data1)
data = read.csv(file = "../Science_Math_Spending.csv")
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
data1 = spread(data, key = unique(Country), value = Value)
names = colnames(data1)[15:60]
names[40:46]
data1 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, sum, na.rm=TRUE)
write.csv(data1, file = "./data/Science_Math_Sixth_Clean.csv")
runApp()
view(cbind(unique(data$MSTI_VAR), unique(data$MSTI.Variables)))
View(data1)
View(data)
test = data %>%
group_by(MSTI_VAR, MSTI.Variables) %>%
summarise(sum(Spain))
View(test)
?substr
##### right sub_str ####
rsubstring = function(str, n) {
return(substr(str, nchar(str)-n, nchar(str)))
}
t1 = "hello this is a test"
rsubstring(t1, 9)
rsubstring(t1, 1)
rsubstring(t1, 1)
##### right sub_str ####
rsubstring = function(str, n) {
return(substr(str, nchar(str)-n+1, nchar(str)))
}
rsubstring(t1, 1)
rsubstring(t1, 9)
View(test)
View(data1)
runApp()
View(data)
test = data %>%
group_by(MSTI_VAR, MSTI.Variables) %>%
summarise_at(names, sum, na.rm=TRUE)
View(test)
?aggregate
View(data)
data = read.csv(file = "../Science_Math_Spending.csv")
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
View(data1)
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
data1 = spread(data, key = unique(Country), value = Value)
View(data1)
?summarise_at
debugSum = function(x) {
print(x)
return(sum(x))
}
debugSum = function(x, ...) {
print(x)
return(sum(x, ...))
}
data1 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, uberSum, na.rm=TRUE)
data1 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, debugSum, na.rm=TRUE)
?all
naSum = function(x, ...) {
if(all(unlist(lapply(x, is.na)))) {
return(NA)
} else {
sum(x, ...)
}
}
data1 = spread(data, key = unique(Country), value = Value)
data1 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src) %>%
summarise_at(names, naSum, na.rm=TRUE)
View(data1)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
billboard <- readr::read_csv("./data/billboard.csv")
head(billboard)
billboard2 <- billboard %>%
gather(key="week", value="rank", wk1:wk76, na.rm = TRUE)
head(billboard2)
data1 = spread(data, key = unique(Country), value = Value)
data = read.csv(file = "../Science_Math_Spending.csv")
data = data %>%
mutate(src = substr(MSTI_VAR, 1, 2))
data1 = spread(data, key = unique(Country), value = Value)
names = colnames(data1)[15:60]
data2 = data1 %>%
filter(!complete.cases(data1[names]))
View(data1[names])
data2 = data1 %>%
filter(complete.cases(data1[names]))
data2 = data1 %>%
filter(!complete.cases(data1[names]))
View(data1)
data1 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src, Country) %>%
summarise_at(names, naSum, na.rm=TRUE)
data1 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src, COU) %>%
summarise_at(names, naSum, na.rm=TRUE)
naSum = function(x, ...) {
if(all(unlist(lapply(x, is.na)))) {
return(NA)
} else {
sum(x, ...)
}
}
data1 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src, COU) %>%
summarise_at(names, sum, na.rm=TRUE)
View(data1)
data1 = spread(data, key = unique(Country), value = Value)
data1 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src, COU) %>%
summarise_at(names, sum)
View(data1)
data2 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src, COU) %>%
summarise_at(names, sum) %>%
filter(complete.cases(names))
data2 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src, COU) %>%
summarise_at(names, sum)
data3 = data2[!complete.cases(names)]
idx = !complete.cases(data2[,names])
data3 = data2[idx,]
idx = complete.cases(data2[,names])
idx = !complete.cases(data2[,names])
View(data)
unlist(lapply(x, is.na)))
unlist(lapply(data1$Argentina, is.na))
print(names(x))
debugSum = function(x, ...) {
print(names(x))
return(sum(x, ...))
}
data2 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src, COU) %>%
summarise_at(deBug, sum)
data2 = data1 %>%
group_by(YEAR, MSTI_VAR, MSTI.Variables, Unit, PowerCode, src, COU) %>%
summarise_at(names, debugSum)
colname(data1$Argentina)
colnames(data1$Argentina)
